# ‚úÖ JWT MODULE FIX - –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ 401

## –ü—Ä–æ–±–ª–µ–º–∞
GET http://localhost:3000/api/messages/telegram/templates
–°—Ç–∞—Ç—É—Å: **401 (Unauthorized)**

Authorization –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –Ω–æ backend –≤—Å—ë —Ä–∞–≤–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401.

## –ü—Ä–∏—á–∏–Ω–∞ –Ω–∞–π–¥–µ–Ω–∞ ‚úÖ
–í `messages.module.ts` JwtModule –±—ã–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å **–ø—É—Å—Ç–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π**:
```typescript
JwtModule.register({})  // ‚ùå –ù–µ—Ç —Å–µ–∫—Ä–µ—Ç–∞!
```

–ë–µ–∑ —Å–µ–∫—Ä–µ—Ç–∞ JWT —Ç–æ–∫–µ–Ω—ã **–Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã**!

## –†–µ—à–µ–Ω–∏–µ ‚úÖ
–û–±–Ω–æ–≤–∏–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é JwtModule –≤ `messages.module.ts`:

```typescript
JwtModule.register({
  secret: process.env.JWT_SECRET || 'secret',
  signOptions: { expiresIn: '1d' },
})
```

–¢–µ–ø–µ—Ä—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è **–∏–¥–µ–Ω—Ç–∏—á–Ω–∞** UserModule.

## –§–∞–π–ª –∏–∑–º–µ–Ω—ë–Ω
**–ü—É—Ç—å:** `apps/back/src/app/modules/messages/messages.module.ts`

**–ë—ã–ª–æ:**
```typescript
JwtModule.register({}), // –î–æ–±–∞–≤–ª—è–µ–º JwtModule –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ JwtAuthGuard
```

**–°—Ç–∞–ª–æ:**
```typescript
JwtModule.register({
  secret: process.env.JWT_SECRET || 'secret',
  signOptions: { expiresIn: '1d' },
}),
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: `Authorization: Bearer eyJ...`
2. Backend JwtAuthGuard –ø—ã—Ç–∞–µ—Ç—Å—è –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω
3. JwtService –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—É—Å—Ç—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é `{}`
4. –í–∞–ª–∏–¥–∞—Ü–∏—è **FAILS** ‚Üí 401 Unauthorized

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: `Authorization: Bearer eyJ...`
2. Backend JwtAuthGuard –ø—ã—Ç–∞–µ—Ç—Å—è –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω
3. JwtService –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `JWT_SECRET` –∏–∑ env
4. –í–∞–ª–∏–¥–∞—Ü–∏—è **SUCCESS** ‚Üí 200 OK

## –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ üöÄ

**–ü–ï–†–ï–ó–ê–ü–£–°–¢–ò–¢–¨ BACKEND:**
```bash
npm run start:back
```

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –≤—Å–µ endpoints –≤ `/api/messages/*` –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π!

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ backend:
```bash
curl -H "Authorization: Bearer <YOUR_TOKEN>" \
  http://localhost:3000/api/messages/telegram/templates?page=1&limit=20
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å **200 OK** —Å –¥–∞–Ω–Ω—ã–º–∏ —à–∞–±–ª–æ–Ω–æ–≤.

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û - –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ backend
