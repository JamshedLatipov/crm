<script setup lang="ts">
import { ref, onMounted } from 'vue';

const plans = [
  {
    name: '–ë–∞–∑–æ–≤—ã–π',
    price: '$3',
    period: '/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–º–µ—Å—è—Ü',
    description: '–î–ª—è –º–∞–ª–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞ –∏ —Å—Ç–∞—Ä—Ç–∞–ø–æ–≤',
    features: [
      '–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
      '–ë–∞–∑–æ–≤–∞—è CRM —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å',
      '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏',
      '–ü—Ä–æ—Å—Ç–∞—è –≤–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂',
      'Email –ø–æ–¥–¥–µ—Ä–∂–∫–∞',
      '1 GB —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
    ],
    highlighted: false,
    cta: '–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É',
  },
  {
    name: '–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π',
    price: '$5',
    period: '/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–º–µ—Å—è—Ü',
    description: '–î–ª—è —Ä–∞—Å—Ç—É—â–∏—Ö –∫–æ–º–∞–Ω–¥ –ø—Ä–æ–¥–∞–∂',
    features: [
      '–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
      '–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ë–∞–∑–æ–≤–æ–≥–æ',
      'IP-—Ç–µ–ª–µ—Ñ–æ–Ω–∏—è –∏ IVR',
      '–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á',
      '–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞',
      '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞',
      '5 GB —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
      'API –¥–æ—Å—Ç—É–ø',
    ],
    highlighted: true,
    cta: '–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å 14 –¥–Ω–µ–π',
  },
  {
    name: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π',
    price: '$10',
    period: '/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–º–µ—Å—è—Ü',
    description: '–î–ª—è –∫—Ä—É–ø–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞',
    features: [
      '–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
      '–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ',
      '–í—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä',
      '–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏',
      '–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä',
      'SLA –≥–∞—Ä–∞–Ω—Ç–∏—è 99.9%',
      '–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ',
      '–û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã',
      '–ë–µ–ª—ã–π –ª–µ–π–±–ª',
    ],
    highlighted: false,
    cta: '–°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏',
  },
];

const isVisible = ref(false);

onMounted(() => {
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          isVisible.value = true;
        }
      });
    },
    { threshold: 0.1 }
  );

  const section = document.querySelector('#pricing');
  if (section) {
    observer.observe(section);
  }
});
</script>

<template>
  <section id="pricing" class="pricing" :class="{ visible: isVisible }">
    <div class="container">
      <div class="section-header">
        <span class="section-badge">–¢–∞—Ä–∏—Ñ—ã</span>
        <h2 class="section-title">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø–ª–∞–Ω</h2>
        <p class="section-description">
          –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–µ —Ü–µ–Ω—ã –±–µ–∑ —Å–∫—Ä—ã—Ç—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π. –ù–∞—á–Ω–∏—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–π—Ç–µ—Å—å –ø–æ –º–µ—Ä–µ —Ä–æ—Å—Ç–∞
        </p>
      </div>

      <div class="pricing-grid">
        <div
          v-for="(plan, index) in plans"
          :key="index"
          :class="['pricing-card', { highlighted: plan.highlighted }]"
          :style="{ '--delay': `${index * 0.15}s` }"
        >
          <div v-if="plan.highlighted" class="popular-badge">–ü–æ–ø—É–ª—è—Ä–Ω—ã–π</div>

          <div class="plan-header">
            <h3 class="plan-name">{{ plan.name }}</h3>
            <p class="plan-description">{{ plan.description }}</p>
          </div>

          <div class="plan-price">
            <span class="price">{{ plan.price }}</span>
            <span v-if="plan.period" class="period">{{ plan.period }}</span>
          </div>

          <ul class="features-list">
            <li v-for="(feature, idx) in plan.features" :key="idx">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                class="check-icon"
              >
                <path d="M20 6L9 17l-5-5" />
              </svg>
              {{ feature }}
            </li>
          </ul>

          <a
            href="#contact"
            :class="['plan-cta', { primary: plan.highlighted }]"
          >
            {{ plan.cta }}
          </a>
        </div>
      </div>

      <div class="pricing-note">
        <p>
          üí° –í—Å–µ —Ç–∞—Ä–∏—Ñ—ã –≤–∫–ª—é—á–∞—é—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É.
          <br />
          –î–ª—è –ù–ö–û –∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —É—á—Ä–µ–∂–¥–µ–Ω–∏–π –¥–µ–π—Å—Ç–≤—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è.
        </p>
      </div>
    </div>
  </section>
</template>

<style scoped lang="scss">
.pricing {
  padding: 100px 0;
  background: linear-gradient(180deg, #fff 0%, #f8fafc 100%);
  position: relative;

  .container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 0 24px;
  }

  .section-header {
    text-align: center;
    margin-bottom: 64px;

    .section-badge {
      display: inline-block;
      padding: 8px 20px;
      background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
      color: #3b82f6;
      font-size: 14px;
      font-weight: 700;
      border-radius: 50px;
      margin-bottom: 16px;
      text-transform: uppercase;
      letter-spacing: 1px;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.6s ease;
    }

    .section-title {
      font-size: 48px;
      font-weight: 800;
      line-height: 1.2;
      color: #0f172a;
      margin: 0 0 16px;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.6s ease 0.1s;
    }

    .section-description {
      font-size: 18px;
      line-height: 1.6;
      color: #64748b;
      max-width: 640px;
      margin: 0 auto;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.6s ease 0.2s;
    }
  }

  &.visible {
    .section-badge,
    .section-title,
    .section-description {
      opacity: 1;
      transform: translateY(0);
    }

    .pricing-card,
    .pricing-note {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .pricing-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 32px;
    margin-bottom: 48px;
  }

  .pricing-card {
    position: relative;
    padding: 40px 32px;
    background: #fff;
    border: 2px solid #e2e8f0;
    border-radius: 24px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    opacity: 0;
    transform: translateY(30px);
    transition-delay: var(--delay);

    &.highlighted {
      border-color: #4285f4;
      box-shadow: 0 20px 60px rgba(66, 133, 244, 0.2);
      transform: scale(1.05);

      .popular-badge {
        display: block;
      }
    }

    &:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);

      &.highlighted {
        transform: translateY(-8px) scale(1.07);
        box-shadow: 0 25px 70px rgba(6, 182, 212, 0.25);
      }
    }

    .popular-badge {
      display: none;
      position: absolute;
      top: -12px;
      left: 50%;
      transform: translateX(-50%);
      padding: 6px 20px;
      background: linear-gradient(135deg, #4285f4 0%, #1967d2 100%);
      color: #fff;
      font-size: 12px;
      font-weight: 700;
      border-radius: 50px;
      text-transform: uppercase;
      letter-spacing: 1px;
      box-shadow: 0 4px 12px rgba(66, 133, 244, 0.4);
    }

    .plan-header {
      text-align: center;
      margin-bottom: 24px;

      .plan-name {
        font-size: 28px;
        font-weight: 700;
        color: #0f172a;
        margin: 0 0 8px;
      }

      .plan-description {
        font-size: 14px;
        color: #64748b;
        margin: 0;
      }
    }

    .plan-price {
      text-align: center;
      margin-bottom: 32px;
      padding-bottom: 32px;
      border-bottom: 2px solid #f1f5f9;

      .price {
        font-size: 48px;
        font-weight: 800;
        color: #1967d2;
        display: inline-block;
      }

      .period {
        font-size: 18px;
        color: #64748b;
        margin-left: 4px;
      }
    }

    .features-list {
      list-style: none;
      padding: 0;
      margin: 0 0 32px;

      li {
        display: flex;
        align-items: flex-start;
        gap: 12px;
        padding: 12px 0;
        font-size: 15px;
        color: #475569;

        .check-icon {
          flex-shrink: 0;
          stroke-width: 3;
          color: #10b981;
          margin-top: 2px;
        }
      }
    }

    .plan-cta {
      display: block;
      width: 100%;
      padding: 16px;
      text-align: center;
      font-size: 16px;
      font-weight: 700;
      text-decoration: none;
      border-radius: 12px;
      transition: all 0.3s ease;
      border: 2px solid #e2e8f0;
      background: #fff;
      color: #0f172a;

      &:hover {
        background: #f8fafc;
        border-color: #cbd5e1;
        transform: translateY(-2px);
      }

      &.primary {
        background: linear-gradient(135deg, #4285f4 0%, #1967d2 100%);
        color: #fff;
        border: none;
        box-shadow: 0 4px 14px rgba(66, 133, 244, 0.4);

        &:hover {
          background: linear-gradient(135deg, #1967d2 0%, #1557b0 100%);
          box-shadow: 0 6px 20px rgba(66, 133, 244, 0.5);
        }
      }
    }
  }

  .pricing-note {
    text-align: center;
    padding: 32px;
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    border-radius: 16px;
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.6s ease 0.6s;

    p {
      margin: 0;
      font-size: 15px;
      color: #78350f;
      line-height: 1.7;
    }
  }
}

@media (max-width: 1024px) {
  .pricing {
    .pricing-grid {
      grid-template-columns: 1fr;

      .pricing-card.highlighted {
        transform: scale(1);

        &:hover {
          transform: translateY(-8px) scale(1.02);
        }
      }
    }
  }
}

@media (max-width: 768px) {
  .pricing {
    padding: 80px 0;

    .section-header {
      margin-bottom: 48px;

      .section-title {
        font-size: 36px;
      }
    }

    .pricing-card {
      padding: 32px 24px;
    }
  }
}
</style>
