# Notification Module - –ú–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω—ã–π —Ü–µ–Ω—Ç—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è CRM

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ SMS, Email –∏ REST API (Webhooks) —Å —à–∞–±–ª–æ–Ω–∞–º–∏, —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–µ–π, –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üìù –®–∞–±–ª–æ–Ω—ã –°–ú–°
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ `{{variable}}`
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤ (–º–∞—Ä–∫–µ—Ç–∏–Ω–≥, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ —Ç.–¥.)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤

### ÔøΩ Email-—Ä–∞—Å—Å—ã–ª–∫–∏
- HTML —à–∞–±–ª–æ–Ω—ã —Å CSS —Å—Ç–∏–ª—è–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ subject –∏ body
- –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ SMTP (nodemailer)
- Preheader –¥–ª—è –ø–æ—á—Ç–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- Text –≤–µ—Ä—Å–∏—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏–π, –∫–ª–∏–∫–æ–≤, –æ—Ç–ø–∏—Å–æ–∫
- –í–∞–ª–∏–¥–∞—Ü–∏—è HTML –∏ email –∞–¥—Ä–µ—Å–æ–≤

### üîó REST API / Webhooks
- –û—Ç–ø—Ä–∞–≤–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ URL
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–µ—Ç–æ–¥–æ–≤: GET, POST, PUT, DELETE
- –¢—Ä–∏ —Ç–∏–ø–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: Bearer, Basic, API Key
- Retry –ª–æ–≥–∏–∫–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ headers
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö –∫–∞–º–ø–∞–Ω–∏–π

### üéØ –ú–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è SMS, Email, Webhook
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∫–∞–Ω–∞–ª–∞–º
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º –∫–∞–Ω–∞–ª–∞–º
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –∫–∞–Ω–∞–ª–æ–≤

### ÔøΩüë• –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–µ–≥–º–µ–Ω—Ç—ã —Å –≥–∏–±–∫–∏–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ AND/OR –ª–æ–≥–∏–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º
- –û–ø–µ—Ä–∞—Ç–æ—Ä—ã: equals, contains, greater, less, between, in –∏ —Ç.–¥.

### üìä –ö–∞–º–ø–∞–Ω–∏–∏
- –¢–∏–ø—ã –∫–∞–º–ø–∞–Ω–∏–π:
  - **Immediate** - –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
  - **Scheduled** - –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
  - **Triggered** - –ø–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º/—Å–æ–±—ã—Ç–∏—è–º
  - **Recurring** - –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—Å—ã–ª–∫–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º: draft, sending, paused, completed
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ (—Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- –î–∞—à–±–æ—Ä–¥ —Å –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–∞–º–ø–∞–Ω–∏–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º –∏ —á–∞—Å–∞–º
- –¢–æ–ø –Ω–µ—É–¥–∞—á–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–π
- –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤
- –¢—Ä–µ–Ω–¥—ã –º–µ—Ç—Ä–∏–∫

### üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
**SMS:**
- **SMS.RU** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ API
- **SMSC.RU** - –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **Twilio** - –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏

**Email:**
- **SMTP** - –ª—é–±–æ–π SMTP —Å–µ—Ä–≤–µ—Ä (Gmail, Yandex, custom)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ TLS/SSL
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ from/reply-to

**REST API:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª—é–±—ã—Ö HTTP endpoints
- –ö–∞—Å—Ç–æ–º–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –ì–∏–±–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
sms/
‚îú‚îÄ‚îÄ entities/                          # TypeORM —Å—É—â–Ω–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ sms-template.entity.ts         # SMS —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ sms-campaign.entity.ts         # SMS –∫–∞–º–ø–∞–Ω–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ sms-message.entity.ts          # SMS —Å–æ–æ–±—â–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ sms-segment.entity.ts          # –°–µ–≥–º–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ sms-analytics.entity.ts        # SMS –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ email-template.entity.ts       # Email —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îî‚îÄ‚îÄ notification-campaign.entity.ts # –ú–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ dto/                               # Data Transfer Objects
‚îÇ   ‚îú‚îÄ‚îÄ template.dto.ts
‚îÇ   ‚îú‚îÄ‚îÄ campaign.dto.ts
‚îÇ   ‚îú‚îÄ‚îÄ segment.dto.ts
‚îÇ   ‚îî‚îÄ‚îÄ sms.dto.ts
‚îÇ
‚îú‚îÄ‚îÄ services/                          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ sms-provider.service.ts        # SMS –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ sms-template.service.ts        # SMS —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ sms-campaign.service.ts        # SMS –∫–∞–º–ø–∞–Ω–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ sms-segment.service.ts         # –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ sms-analytics.service.ts       # SMS –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ email-provider.service.ts      # Email –ø—Ä–æ–≤–∞–π–¥–µ—Ä (SMTP)
‚îÇ   ‚îú‚îÄ‚îÄ email-template.service.ts      # Email —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ rest-api-provider.service.ts   # REST API/Webhooks
‚îÇ   ‚îî‚îÄ‚îÄ notification.service.ts        # –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ
‚îú‚îÄ‚îÄ controllers/                       # REST API
‚îÇ   ‚îú‚îÄ‚îÄ sms-template.controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ sms-campaign.controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ sms-segment.controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ sms-analytics.controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ email-template.controller.ts
‚îÇ   ‚îî‚îÄ‚îÄ notification.controller.ts
‚îÇ
‚îú‚îÄ‚îÄ migrations/                        # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ 1703700000001-CreateSmsTemplatesTable.ts
‚îÇ   ‚îú‚îÄ‚îÄ 1703700000002-CreateSmsSegmentsTable.ts
‚îÇ   ‚îú‚îÄ‚îÄ 1703700000003-CreateSmsCampaignsTable.ts
‚îÇ   ‚îú‚îÄ‚îÄ 1703700000004-CreateSmsMessagesTable.ts
‚îÇ   ‚îú‚îÄ‚îÄ 1703700000005-CreateSmsAnalyticsTable.ts
‚îÇ   ‚îú‚îÄ‚îÄ 1703700000006-CreateEmailTemplatesTable.ts
‚îÇ   ‚îî‚îÄ‚îÄ 1703700000007-CreateNotificationCampaignsTable.ts
‚îÇ
‚îú‚îÄ‚îÄ sms.module.ts                      # –ú–æ–¥—É–ª—å NestJS
‚îî‚îÄ‚îÄ README.md                          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```env
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
SMS_PROVIDER=smsru              # smsru | smsc | twilio | custom
SMS_API_KEY=your_api_key_here
SMS_SENDER=CRM                  # –ò–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è

# SMS.RU
SMS_API_URL=https://sms.ru/sms/send

# SMSC.RU
SMSC_LOGIN=your_login
SMSC_PASSWORD=your_password

# Twilio
TWILIO_ACCOUNT_SID=your_account_sid
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_PHONE_NUMBER=+1234567890
```

### –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
npm run migration:run
```

## üìö API Endpoints

### –®–∞–±–ª–æ–Ω—ã

```
POST   /sms/templates              # –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω
GET    /sms/templates              # –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤
GET    /sms/templates/popular      # –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã
GET    /sms/templates/:id          # –ü–æ–ª—É—á–∏—Ç—å —à–∞–±–ª–æ–Ω
PUT    /sms/templates/:id          # –û–±–Ω–æ–≤–∏—Ç—å —à–∞–±–ª–æ–Ω
DELETE /sms/templates/:id          # –£–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω
POST   /sms/templates/:id/duplicate # –î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å
POST   /sms/templates/:id/validate # –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å
POST   /sms/templates/test         # –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
```

### –°–µ–≥–º–µ–Ω—Ç—ã

```
POST   /sms/segments                     # –°–æ–∑–¥–∞—Ç—å —Å–µ–≥–º–µ–Ω—Ç
GET    /sms/segments                     # –°–ø–∏—Å–æ–∫ —Å–µ–≥–º–µ–Ω—Ç–æ–≤
GET    /sms/segments/:id                 # –ü–æ–ª—É—á–∏—Ç—å —Å–µ–≥–º–µ–Ω—Ç
PUT    /sms/segments/:id                 # –û–±–Ω–æ–≤–∏—Ç—å —Å–µ–≥–º–µ–Ω—Ç
DELETE /sms/segments/:id                 # –£–¥–∞–ª–∏—Ç—å —Å–µ–≥–º–µ–Ω—Ç
GET    /sms/segments/:id/contacts        # –ö–æ–Ω—Ç–∞–∫—Ç—ã —Å–µ–≥–º–µ–Ω—Ç–∞
GET    /sms/segments/:id/phone-numbers   # –ù–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
POST   /sms/segments/:id/recalculate     # –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å
POST   /sms/segments/preview             # –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
```

### –ö–∞–º–ø–∞–Ω–∏–∏

```
POST   /sms/campaigns              # –°–æ–∑–¥–∞—Ç—å –∫–∞–º–ø–∞–Ω–∏—é
GET    /sms/campaigns              # –°–ø–∏—Å–æ–∫ –∫–∞–º–ø–∞–Ω–∏–π
GET    /sms/campaigns/:id          # –ü–æ–ª—É—á–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏—é
PUT    /sms/campaigns/:id          # –û–±–Ω–æ–≤–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏—é
DELETE /sms/campaigns/:id          # –£–¥–∞–ª–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏—é
POST   /sms/campaigns/:id/prepare  # –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
POST   /sms/campaigns/:id/start    # –ó–∞–ø—É—Å—Ç–∏—Ç—å
POST   /sms/campaigns/:id/pause    # –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
POST   /sms/campaigns/:id/resume   # –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å
POST   /sms/campaigns/:id/cancel   # –û—Ç–º–µ–Ω–∏—Ç—å
GET    /sms/campaigns/:id/stats    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

```
GET /sms/analytics/dashboard              # –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
GET /sms/analytics/campaigns/performance  # –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
GET /sms/analytics/messages/by-day        # –ü–æ –¥–Ω—è–º
GET /sms/analytics/messages/by-hour       # –ü–æ —á–∞—Å–∞–º
GET /sms/analytics/failed/top             # –¢–æ–ø –Ω–µ—É–¥–∞—á
GET /sms/analytics/campaigns/compare      # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ
GET /sms/analytics/campaigns/:id/export   # –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–∞
GET /sms/analytics/metrics/trends         # –¢—Ä–µ–Ω–¥—ã
```

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞

```typescript
POST /sms/templates
{
  "name": "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ",
  "content": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, {{firstName}}! –°–ø–∞—Å–∏–±–æ –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤ {{company}}.",
  "category": "welcome",
  "variables": ["firstName", "company"]
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞

```typescript
POST /sms/segments
{
  "name": "–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã",
  "filters": [
    {
      "field": "status",
      "operator": "equals",
      "value": "active"
    },
    {
      "field": "lastPurchaseDate",
      "operator": "greater",
      "value": "2024-01-01"
    }
  ],
  "filterLogic": "AND",
  "isDynamic": true
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –∫–∞–º–ø–∞–Ω–∏–∏

```typescript
// 1. –°–æ–∑–¥–∞—Ç—å –∫–∞–º–ø–∞–Ω–∏—é
POST /sms/campaigns
{
  "name": "–ê–∫—Ü–∏—è –Ω–∞ –ù–æ–≤—ã–π –ì–æ–¥",
  "templateId": "uuid-template",
  "segmentId": "uuid-segment",
  "type": "scheduled",
  "scheduledAt": "2024-12-31T10:00:00Z",
  "settings": {
    "sendingSpeed": 100,
    "retryFailedMessages": true,
    "maxRetries": 3
  }
}

// 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
POST /sms/campaigns/:id/prepare

// 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏—é
POST /sms/campaigns/:id/start
```

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
- –û—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—É–∑—ã –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### Cron-–∑–∞–¥–∞—á–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π (–∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É)
- –ü–µ—Ä–µ—Å—á—ë—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –ë–∞—Ç—á–∏–Ω–≥ –ø—Ä–∏ –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –≤ —Å–µ–≥–º–µ–Ω—Ç–∞—Ö

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ guards
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –Ω–æ–º–µ—Ä–æ–≤ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã

1. **sms_templates** - –®–∞–±–ª–æ–Ω—ã –°–ú–°
2. **sms_segments** - –°–µ–≥–º–µ–Ω—Ç—ã –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
3. **sms_campaigns** - –ö–∞–º–ø–∞–Ω–∏–∏ —Ä–∞—Å—Å—ã–ª–æ–∫
4. **sms_messages** - –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
5. **sms_analytics** - –ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –°–≤—è–∑–∏

```
User ‚îÄ‚îÄ‚îê
       ‚îú‚îÄ‚îÄ> SmsTemplate ‚îÄ‚îÄ> SmsCampaign ‚îÄ‚îÄ> SmsMessage ‚îÄ‚îÄ> Contact/Lead
       ‚îî‚îÄ‚îÄ> SmsSegment ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîÆ –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

- [ ] –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ SMS (–≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
- [ ] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
- [ ] –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ ML
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WhatsApp Business API
- [ ] Webhook'–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –¥–æ—Å—Ç–∞–≤–∫–µ
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ—Ä–æ–Ω–∫–∏ (drip campaigns)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞–ª–µ–Ω–¥–∞—Ä—ë–º –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤:
- [SMS.RU API](https://sms.ru/api)
- [SMSC.RU API](https://smsc.ru/api/)
- [Twilio SMS API](https://www.twilio.com/docs/sms)

