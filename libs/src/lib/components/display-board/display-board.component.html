<div class="display-board">
  <!-- Header -->
  <div class="board-header">
    <div class="header-left">
      <h1 class="board-title">–°–¢–û - –û—á–µ—Ä–µ–¥—å</h1>
      <span class="display-id">{{ displayId() }}</span>
    </div>
    <div class="header-right">
      <div class="status-indicator" [class.connected]="connected()" [class.disconnected]="!connected()">
        <span class="status-dot"></span>
        <span class="status-text">{{ connected() ? '–ü–æ–¥–∫–ª—é—á–µ–Ω–æ' : '–ù–µ—Ç —Å–≤—è–∑–∏' }}</span>
      </div>
      <div class="current-time">{{ currentTime() | date:'HH:mm:ss' }}</div>
      <button class="refresh-btn" (click)="refresh()" [disabled]="!connected()">
        üîÑ –û–±–Ω–æ–≤–∏—Ç—å
      </button>
    </div>
  </div>

  <!-- Queue Table -->
  <div class="queue-container">
    @if (orders().length === 0) {
      <div class="empty-state">
        <div class="empty-icon">üìã</div>
        <p class="empty-text">–û—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞</p>
        <p class="empty-subtext">–ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</p>
      </div>
    } @else {
      <table class="queue-table">
        <thead>
          <tr>
            <th class="col-number">‚Ññ</th>
            <th class="col-zone">–ó–æ–Ω–∞</th>
            <th class="col-vehicle">–ê–≤—Ç–æ–º–æ–±–∏–ª—å</th>
            <th class="col-plate">–ì–æ—Å. –Ω–æ–º–µ—Ä</th>
            <th class="col-work">–¢–∏–ø —Ä–∞–±–æ—Ç</th>
            <th class="col-status">–°—Ç–∞—Ç—É—Å</th>
            <th class="col-priority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</th>
            <th class="col-time">–í—Ä–µ–º—è</th>
          </tr>
        </thead>
        <tbody>
          @for (order of orders(); track order.id) {
            <tr class="queue-row" [class]="getStatusClass(order.status)">
              <td class="col-number">
                <div class="queue-number">{{ order.queueNumber }}</div>
                <div class="zone-number">{{ order.zone }}-{{ order.queueNumberInZone }}</div>
              </td>
              <td class="col-zone">
                <div class="zone-badge">{{ order.zone }}</div>
              </td>
              <td class="col-vehicle">
                <div class="vehicle-make">{{ order.vehicleMake }}</div>
                <div class="vehicle-model">{{ order.vehicleModel }} ({{ order.vehicleYear }})</div>
              </td>
              <td class="col-plate">
                <div class="license-plate">{{ order.licensePlate }}</div>
              </td>
              <td class="col-work">
                <div class="work-type">{{ order.workType }}</div>
                @if (order.workDescription) {
                  <div class="work-desc">{{ order.workDescription }}</div>
                }
              </td>
              <td class="col-status">
                <span class="status-badge" [class]="getStatusClass(order.status)">
                  {{ getStatusText(order.status) }}
                </span>
              </td>
              <td class="col-priority">
                <span class="priority-badge" [class]="getPriorityClass(order.priority)">
                  {{ order.priority }}
                </span>
              </td>
              <td class="col-time">
                <div class="time-created">{{ order.createdAt | date:'HH:mm' }}</div>
                @if (order.startedAt) {
                  <div class="time-started">üîß {{ order.startedAt | date:'HH:mm' }}</div>
                }
              </td>
            </tr>
          }
        </tbody>
      </table>
    }
  </div>

  <!-- Footer -->
  <div class="board-footer">
    <div class="footer-info">
      <span>–í—Å–µ–≥–æ –≤ –æ—á–µ—Ä–µ–¥–∏: {{ orders().length }}</span>
    </div>
    <div class="footer-legend">
      <span class="legend-item">
        <span class="legend-dot status-waiting"></span> –û–∂–∏–¥–∞–Ω–∏–µ
      </span>
      <span class="legend-item">
        <span class="legend-dot status-in-progress"></span> –í —Ä–∞–±–æ—Ç–µ
      </span>
      <span class="legend-item">
        <span class="legend-dot status-completed"></span> –ó–∞–≤–µ—Ä—à–µ–Ω–æ
      </span>
    </div>
  </div>
</div>
