# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ date-fns –¥–ª—è –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –î–∞—Ç

## –û–±–∑–æ—Ä

–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ **date-fns** —Å **—Ä—É—Å—Å–∫–æ–π –ª–æ–∫–∞–ª—å—é** –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞—Ç –≤ —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install date-fns
```

---

## üéØ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –§—É–Ω–∫—Ü–∏–∏

### 1. `format()` - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –¥–∞—Ç—É –≤ –∑–∞–¥–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å —É—á–µ—Ç–æ–º –ª–æ–∫–∞–ª–∏

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```typescript
format(date: Date, formatString: string, options: { locale: Locale })
```

**–ü—Ä–∏–º–µ—Ä—ã —Ñ–æ—Ä–º–∞—Ç–æ–≤:**
- `"d MMMM yyyy"` ‚Üí "22 –æ–∫—Ç—è–±—Ä—è 2025"
- `"d MMMM yyyy '–≤' HH:mm"` ‚Üí "22 –æ–∫—Ç—è–±—Ä—è 2025 –≤ 15:45"
- `"dd.MM.yyyy"` ‚Üí "22.10.2025"
- `"EEEE, d MMMM"` ‚Üí "—Å—Ä–µ–¥–∞, 22 –æ–∫—Ç—è–±—Ä—è"

### 2. `formatDistanceToNow()` - –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—à–ª–æ/–æ—Å—Ç–∞–ª–æ—Å—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–≥–æ –º–æ–º–µ–Ω—Ç–∞

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```typescript
formatDistanceToNow(date: Date, options: { addSuffix: boolean, locale: Locale })
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `addSuffix: true` ‚Üí "2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥", "—á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç"
- `addSuffix: false` ‚Üí "2 —á–∞—Å–∞", "5 –º–∏–Ω—É—Ç"

---

## üíª –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### task-form.component.ts

```typescript
import { format } from 'date-fns';
import { ru } from 'date-fns/locale';

export class TaskFormComponent {
  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –≤ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–º –≤–∏–¥–µ
  formatDate(date: Date | null): string {
    if (!date) return '';
    try {
      return format(date, "d MMMM yyyy '–≤' HH:mm", { locale: ru });
    } catch (error) {
      console.error('Error formatting date:', error);
      return date.toLocaleString('ru-RU');
    }
  }
}
```

**HTML:**
```html
<span class="deadline-value">{{ formatDate(calculatedDueDate) }}</span>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** "22 –æ–∫—Ç—è–±—Ä—è 2025 –≤ 15:45"

---

### task-list.component.ts

```typescript
import { formatDistanceToNow, format } from 'date-fns';
import { ru } from 'date-fns/locale';

export class TaskListComponent {
  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã (–∫–æ—Ä–æ—Ç–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç)
  formatDateHuman(dateStr: string): string {
    try {
      const date = new Date(dateStr);
      return format(date, "d MMMM yyyy", { locale: ru });
    } catch (error) {
      return dateStr;
    }
  }

  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
  formatRelativeTime(dateStr: string): string {
    try {
      const date = new Date(dateStr);
      return formatDistanceToNow(date, { addSuffix: true, locale: ru });
    } catch (error) {
      return '';
    }
  }
}
```

**HTML:**
```html
<div class="date-value">{{ formatDateHuman(task.dueDate) }}</div>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** "22 –æ–∫—Ç—è–±—Ä—è 2025"

---

### task-detail.component.ts

```typescript
import { format, formatDistanceToNow } from 'date-fns';
import { ru } from 'date-fns/locale';

export class TaskDetailComponent {
  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã —Å –≤—Ä–µ–º–µ–Ω–µ–º
  formatDateHuman(dateStr: string | undefined): string {
    if (!dateStr) return '';
    try {
      const date = new Date(dateStr);
      return format(date, "d MMMM yyyy '–≤' HH:mm", { locale: ru });
    } catch (error) {
      return dateStr;
    }
  }

  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
  formatRelativeTime(dateStr: string | undefined): string {
    if (!dateStr) return '';
    try {
      const date = new Date(dateStr);
      return formatDistanceToNow(date, { addSuffix: true, locale: ru });
    } catch (error) {
      return '';
    }
  }
}
```

**HTML (–¥–µ–¥–ª–∞–π–Ω):**
```html
<div class="due-date-value">{{ formatDateHuman(task()?.dueDate) }}</div>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** "22 –æ–∫—Ç—è–±—Ä—è 2025 –≤ 15:45"

**HTML (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏):**
```html
<span class="comment-date">{{ formatRelativeTime(comment.createdAt) }}</span>
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** "2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥"

---

## üé® –ü—Ä–∏–º–µ—Ä—ã –§–æ—Ä–º–∞—Ç–æ–≤

### –ü–æ–ª–Ω–∞—è –¥–∞—Ç–∞ —Å –≤—Ä–µ–º–µ–Ω–µ–º
```typescript
format(date, "d MMMM yyyy '–≤' HH:mm", { locale: ru })
// ‚Üí "22 –æ–∫—Ç—è–±—Ä—è 2025 –≤ 15:45"
```

### –î–∞—Ç–∞ –±–µ–∑ –≤—Ä–µ–º–µ–Ω–∏
```typescript
format(date, "d MMMM yyyy", { locale: ru })
// ‚Üí "22 –æ–∫—Ç—è–±—Ä—è 2025"
```

### –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –∏ –¥–∞—Ç–∞
```typescript
format(date, "EEEE, d MMMM", { locale: ru })
// ‚Üí "—Å—Ä–µ–¥–∞, 22 –æ–∫—Ç—è–±—Ä—è"
```

### –ö–æ—Ä–æ—Ç–∫–∏–π —Ñ–æ—Ä–º–∞—Ç
```typescript
format(date, "dd.MM.yyyy", { locale: ru })
// ‚Üí "22.10.2025"
```

### –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
```typescript
formatDistanceToNow(date, { addSuffix: true, locale: ru })
// ‚Üí "2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥"
// ‚Üí "—á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç"
// ‚Üí "–æ–∫–æ–ª–æ 1 –º–µ—Å—è—Ü–∞ –Ω–∞–∑–∞–¥"
```

---

## üìä –ì–¥–µ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

### 1. task-form.component

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á–∏  
**–ú–µ—Å—Ç–æ:** –ö–∞—Ä—Ç–æ—á–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–≥–æ –¥–µ–¥–ª–∞–π–Ω–∞  
**–§–æ—Ä–º–∞—Ç:** `"d MMMM yyyy '–≤' HH:mm"`  
**–ü—Ä–∏–º–µ—Ä:** "22 –æ–∫—Ç—è–±—Ä—è 2025 –≤ 15:45"

---

### 2. task-list.component

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á  
**–ú–µ—Å—Ç–æ:** –ö–æ–ª–æ–Ω–∫–∞ "–°—Ä–æ–∫" –≤ —Ç–∞–±–ª–∏—Ü–µ  
**–§–æ—Ä–º–∞—Ç:** `"d MMMM yyyy"`  
**–ü—Ä–∏–º–µ—Ä:** "22 –æ–∫—Ç—è–±—Ä—è 2025"

---

### 3. task-detail.component

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–¥–∞—á–∏  
**–ú–µ—Å—Ç–∞:**
1. **–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** `"d MMMM yyyy '–≤' HH:mm"` ‚Üí "22 –æ–∫—Ç—è–±—Ä—è 2025 –≤ 15:45"
2. **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** `"d MMMM yyyy '–≤' HH:mm"` ‚Üí "22 –æ–∫—Ç—è–±—Ä—è 2025 –≤ 10:30"
3. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:** `formatDistanceToNow()` ‚Üí "2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥"

---

## üåç –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

### –†—É—Å—Å–∫–∞—è –ª–æ–∫–∞–ª—å (ru)

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ `date-fns/locale`:

```typescript
import { ru } from 'date-fns/locale';
```

**–ß—Ç–æ –ª–æ–∫–∞–ª–∏–∑—É–µ—Ç—Å—è:**
- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏—è –º–µ—Å—è—Ü–µ–≤: "—è–Ω–≤–∞—Ä—å", "—Ñ–µ–≤—Ä–∞–ª—å", "–æ–∫—Ç—è–±—Ä—å"
- ‚úÖ –î–Ω–∏ –Ω–µ–¥–µ–ª–∏: "–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫", "—Å—Ä–µ–¥–∞", "–ø—è—Ç–Ω–∏—Ü–∞"
- ‚úÖ –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è: "–Ω–∞–∑–∞–¥", "—á–µ—Ä–µ–∑", "–æ–∫–æ–ª–æ"
- ‚úÖ –ï–¥–∏–Ω–∏—Ü—ã –≤—Ä–µ–º–µ–Ω–∏: "—á–∞—Å–∞", "–º–∏–Ω—É—Ç", "–¥–Ω–µ–π", "–º–µ—Å—è—Ü–∞"

---

## ‚öôÔ∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –û—à–∏–±–æ–∫

–í—Å–µ –º–µ—Ç–æ–¥—ã –æ–±–µ—Ä–Ω—É—Ç—ã –≤ `try-catch`:

```typescript
formatDate(date: Date | null): string {
  if (!date) return '';
  try {
    return format(date, "d MMMM yyyy '–≤' HH:mm", { locale: ru });
  } catch (error) {
    console.error('Error formatting date:', error);
    return date.toLocaleString('ru-RU'); // Fallback
  }
}
```

**Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:**
- –ï—Å–ª–∏ `date-fns` –Ω–µ –º–æ–∂–µ—Ç –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `toLocaleString('ru-RU')`
- –ï—Å–ª–∏ –¥–∞—Ç–∞ `null/undefined` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
- –û—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ date-fns

### ‚úÖ vs Angular DatePipe

| –ö—Ä–∏—Ç–µ—Ä–∏–π | date-fns | Angular DatePipe |
|----------|----------|------------------|
| **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è** | –ü–æ–ª–Ω–∞—è, –≥–∏–±–∫–∞—è | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è |
| **–†–∞–∑–º–µ—Ä** | Tree-shakable, ~2KB | –í–∫–ª—é—á–µ–Ω –≤ Angular |
| **–§–æ—Ä–º–∞—Ç—ã** | –ë–æ–ª–µ–µ –±–æ–≥–∞—Ç—ã–µ | –ë–∞–∑–æ–≤—ã–µ |
| **–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è** | –í—Å—Ç—Ä–æ–µ–Ω–æ (`formatDistanceToNow`) | –¢—Ä–µ–±—É–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–π pipe |
| **TypeScript** | –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è | –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–æ |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** | –ú–µ—Ç–æ–¥—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ | Pipe –≤ —à–∞–±–ª–æ–Ω–µ |

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

- üé® **–ë–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:** "22 –æ–∫—Ç—è–±—Ä—è" –≤–º–µ—Å—Ç–æ "22.10"
- üåç **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è:** —Å–∫–ª–æ–Ω–µ–Ω–∏—è, –ø–∞–¥–µ–∂–∏
- ‚è±Ô∏è **–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è:** "2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥" –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- üîß **–ì–∏–±–∫–æ—Å—Ç—å:** –ª—é–±—ã–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- üì¶ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å:** –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –î–µ–¥–ª–∞–π–Ω –∑–∞–¥–∞—á–∏

**–í—Ö–æ–¥:** ISO string "2025-10-22T15:45:00.000Z"  
**–í—ã—Ö–æ–¥:** "22 –æ–∫—Ç—è–±—Ä—è 2025 –≤ 15:45"

```typescript
formatDate(new Date("2025-10-22T15:45:00.000Z"))
```

---

### –ü—Ä–∏–º–µ—Ä 2: –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á

**–í—Ö–æ–¥:** ISO string "2025-10-25T10:00:00.000Z"  
**–í—ã—Ö–æ–¥:** "25 –æ–∫—Ç—è–±—Ä—è 2025"

```typescript
formatDateHuman("2025-10-25T10:00:00.000Z")
```

---

### –ü—Ä–∏–º–µ—Ä 3: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

**–í—Ö–æ–¥:** ISO string "2025-10-22T13:30:00.000Z" (—Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è: 15:30)  
**–í—ã—Ö–æ–¥:** "2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥"

```typescript
formatRelativeTime("2025-10-22T13:30:00.000Z")
```

---

### –ü—Ä–∏–º–µ—Ä 4: –ë—É–¥—É—â–∞—è –¥–∞—Ç–∞

**–í—Ö–æ–¥:** ISO string "2025-10-23T10:00:00.000Z" (–∑–∞–≤—Ç—Ä–∞)  
**–í—ã—Ö–æ–¥:** "—á–µ—Ä–µ–∑ 1 –¥–µ–Ω—å"

```typescript
formatDistanceToNow(new Date("2025-10-23T10:00:00.000Z"), { 
  addSuffix: true, 
  locale: ru 
})
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß–µ–∫–ª–∏—Å—Ç:

- [ ] –î–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- [ ] –§–æ—Ä–º–∞—Ç "d MMMM yyyy" —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –§–æ—Ä–º–∞—Ç "d MMMM yyyy '–≤' HH:mm" —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –°–∫–ª–æ–Ω–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ("2 —á–∞—Å–∞", "5 –º–∏–Ω—É—Ç")
- [ ] Fallback –Ω–∞ toLocaleString –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- [ ] –ü—É—Å—Ç—ã–µ –¥–∞—Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
- [ ] –î–µ–¥–ª–∞–π–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø–æ–ª–Ω—É—é –¥–∞—Ç—É —Å –≤—Ä–µ–º–µ–Ω–µ–º

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 22 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ
