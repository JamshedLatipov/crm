[default]
exten => 1000,1,Answer()
exten => 1000,n,NoOp(Entering ARI Stasis application crm-app)
exten => 1000,n,Stasis(crm-app,${CALLERID(num)})
exten => 1000,n,Playback(demo-congrats)
exten => 1000,n,Hangup()

; Dedicated IVR entry extension -> dynamic IVR tree (root node must exist)
exten => 6000,1,Answer()
exten => 6000,n,NoOp(Entering dynamic IVR via ARI crm-app)
exten => 6000,n,Stasis(crm-app,${CALLERID(num)})
exten => 6000,n,Hangup()

; ARI test extension routes call into Stasis application "crm-app"
exten => 1100,1,NoOp(Entering ARI Stasis application crm-app)
exten => 1100,n,Stasis(crm-app,${CALLERID(num)})
exten => 1100,n,Hangup()

; Operator extensions
exten => 2001,1,Answer()
exten => 2001,n,Playback(custom/1755270740097_45543)
exten => 2001,n,Hangup()

exten => 2002,1,Answer()
exten => 2002,n,Playback(hello-world)
exten => 2002,n,Hangup()

exten => 2003,1,Answer()
exten => 2003,n,Playback(hello-world)
exten => 2003,n,Hangup()

exten => 2004,1,Answer()
exten => 2004,n,Playback(hello-world)
exten => 2004,n,Hangup()

; Allow direct calls by operator username (e.g. sip:operator2@host)
; Map logical operator names to PJSIP endpoints so INVITEs to 'operator2' resolve
exten => operator1,1,NoOp(Calling operator1 by name)
exten => operator1,n,Dial(PJSIP/operator1,20)
exten => operator1,n,Hangup()

exten => operator2,1,NoOp(Calling operator2 by name)
exten => operator2,n,Dial(PJSIP/operator2,20)
exten => operator2,n,Hangup()


exten => microsip,1,NoOp(Calling microsip by name)
exten => microsip,n,Dial(PJSIP/microsip,20)
exten => microsip,n,Hangup()

; Generic queue bridge: callers redirected to extension queue_<name> will be sent to Queue(<name>)
exten => support,1,NoOp(Routing to queue support)
exten => same,n,Answer()
exten => same,n,Queue(support)
exten => same,n,Hangup()

; Context for channels continued from ARI
[from-ari]
; Example: POST /ari/channels/{channelId}/continue?context=from-ari&extension=1000&priority=1
; Map explicit dialplan entries for ARI continue/originate targets
exten => 1000,1,NoOp(From ARI: routing to extension 1000)
exten => 1000,2,Answer()
exten => 1000,3,Queue(support)
exten => 1000,4,Hangup()

; Support alternative extension name expected by some ARI redirects (queue_<name>)
exten => support,1,NoOp(From ARI: routing to support queue by queue_<name>)
exten => support,2,Answer()
exten => support,3,Queue(support)
exten => support,4,Hangup()
